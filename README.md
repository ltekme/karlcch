# Flask static website builder

Using Flask and jinja template to build static website "standerd formattly"

## .buildenv

This file store the enviroments of building to staic.<br />
This file is untracked by git. `build.py` will look for this file for build config.<br/>
When this file is not found or valuse are not specifyed. A build with default valuse below will not be used

- SERVER_NAME
    
    the hostname of the server, default: `localhost` when

- URL_SCHEME

    This value determin weather url hostname use TLS when this valuse is persent. Links generated by `build.py` will be a full url path with hostname if this valuse is present

- BUILD_DESTINATION

    The directory of the builded staic site.<br>
    by default this is set to `.build` of the base dir of build.py

## Defining Pages

- `app/routes.py`

    This file defines the extra datas of the static sites such as

    - favicon.ico
    - robots.txt
    - error page
    - sitemap.xml
    - static files mapping

        because Frozen-Flask will copy the static folder to the build folder to perven duplication of files a special route `@app.route('/static/<path:path>')` is used to load from the static folder

- `app/pages.py`

    This file hold paths of the sites
    
- `app/static`

    This folder holdes static files for the the site. see `app/routes.py`. Files like /favicon.ico should be placed in this folder.<br />
    however becaulse as shown before files will be duplicated, so another folder is used `app/resources`

- `app/resources`

    This folder is used to hold specical files such as favicon.ico as shown before. <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">Manifest</a> files should also be placed in this folder with routes in routes.py pointing to files in this folder


## url_for static content

because I wanted all static content be sored in the `/static` folder the special route is used to retrive the content hense :

`{{ url_for('static_content', path='images/icon.webp', _scheme=config.get('URL_SCHEME')) }}`

please refer to <a href="https://flask.palletsprojects.com/en/2.3.x/api/#flask.url_for">flask.url_for</a> documentation


## url_for _external and _scheme

pages defined in the application need to be able to build of external html hosting. Thus making url_for so long. `url_for` need to know when to use full url or just short url, and the most dynamic way to define these valuse is to use app config. I havn't found a value I can set to make all url_for have these 2 arguments set. so long url_for it is. see `pages.py` for details

# running the dev server and building

run the `run.py` to run the flask dev server

to build to static site, copy .buildenv.template to .buildenv change options as needed and run `build.py`